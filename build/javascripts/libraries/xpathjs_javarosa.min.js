XPathJS=(function(){var y,t,o,b,u,B,c,q,E,v,w,j=[],d="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/2000/xmlns/",p="http://www.w3.org/1999/xhtml",s,D,z,A,h,g,x=function(G){return G.ownerDocument},n=function(H){var G=[],I=function(J,L){var M,K,N=[];for(K=0;K<J.length;K++){M=J.item(K);if(false!==arrayIndexOf(M.nodeType,L)){N.push(M)}}return N};switch(H.nodeType){case 1:G=I(H.childNodes,supportedChildNodeTypes=[1,3,4,7,8]);break;case 9:G=I(H.childNodes,supportedChildNodeTypes=[1,7,8]);break;case 2:case 3:case 4:case 7:case 8:case 13:break;default:throw new Error("Internal Error: nodeChildren - unsupported node type: "+H.nodeType);break}return G},l=function(J){var H,I,G=[];H=n(J);for(I=0;I<H.length;I++){G.push(H[I]);G.push.apply(G,l(H[I]))}return G},f=function(H){var G;switch(H.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:return H.parentNode;break;case 2:if(H.ownerElement){return H.ownerElement}G=nodeAttributeSearch(H.ownerDocument,true,function(I,J){if(J===H){return true}});return G;break;case 13:return H.ownerElement;break;default:throw new Error("Internal Error: nodeParent - node type not supported: "+H.type);break}},a=function(I){var H,G=[];while(H=f(I)){G.push(H);I=H}return G},k=function(G){return F(G,"nextSibling")},m=function(G){return F(G,"previousSibling")},F=function(J,I){var H,G=[];while(H=J[I]){switch(H.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:G.push(H);break;default:break}J=H}return G},r=function(K){var G=[],I,J,L,H;I=a(K);I.unshift(K);for(J=0;J<I.length;J++){L=k(I[J]);for(H=0;H<L.length;H++){G.push(L[H]);G.push.apply(G,l(L[H]))}}return G},e=function(K){var G=[],I,J,L,H;I=a(K);I.unshift(K);for(J=0;J<I.length;J++){L=m(I[J]);for(H=0;H<L.length;H++){G.push.apply(G,l(L[H]).reverse());G.push(L[H])}}return G},x=function(G){switch(G.nodeType){case 9:return G;default:return G.ownerDocument}};nodeAttribute=function(I){var G=[],H;if(I.nodeType===1){for(H=0;H<I.attributes.length;H++){if(!I.attributes[H].specified){continue}if(false===isNamespaceAttributeNode(I.attributes[H])){G.push(I.attributes[H])}}}return G},nodeNamespace=function(K,L){var G=(L||[]),I,H,J;if(K.nodeType===1){if(K.ownerDocument.documentElement===K&&typeof K.ownerDocument.namespaces==="object"){for(I=K.ownerDocument.namespaces.length-1;I>=0;I--){J=K.ownerDocument.namespaces.item(I);insertNamespaceIfNotDeclared.call(this,G,J.name,J.urn,K)}}for(I=K.attributes.length-1;I>=0;I--){if(!K.attributes[I].specified){continue}if(false===(H=isNamespaceAttributeNode(K.attributes[I]))){continue}if(H.length===1){insertNamespaceIfNotDeclared.call(this,G,"",K.attributes[I].nodeValue,K);continue}insertNamespaceIfNotDeclared.call(this,G,H[1],K.attributes[I].nodeValue,K)}nodeNamespace.call(this,K.parentNode,G);if(L===undefined){insertNamespaceIfNotDeclared.call(this,G,"xml",d,K);if(G[0]&&G[0].prefix===""&&G[0].namespaceURI===""){G.shift()}}if(L===undefined){for(I=0;I<G.length;I++){if(G[I].ownerElement!==K){G[I]=createNamespaceNode(G[I].prefix,G[I].nodeValue,K)}}}}return G},insertNamespaceIfNotDeclared=function(L,K,J,I){var G,H;if(!this.opts["case-sensitive"]){K=K.toLowerCase()}for(G=0;G<L.length;G++){if(L[G].prefix===K){return false}}H=createNamespaceNode(K,J,I);if(K===""&&J!==null){L.unshift(H)}else{L.push(H)}return true},isNamespaceAttributeNode=function(H){var G=H.nodeName.split(":");if(G[0]==="xmlns"){return G}return false},nodeIdAttribute=function(K,J){var N,L,M,I,O,G,H;if(K.nodeType===1){M=(!J)?nodeAttribute(K):[J];I=nodeNamespace.call(this,K);for(N=0;N<M.length;N++){G=M[N].nodeName.split(":");if(G.length===1){G[1]=G[0];G[0]=""}O=null;for(L=0;L<I.length;L++){if(I[L].prefix===G[0]){O=I[L].namespaceURI;break}}if(O===null){O=""}if(this.opts["unique-ids"][O]===G[1]){return M[N]}}}return null},nodeAttributeSearch=function(H,K,L){var J,G,N,I,M=[];N=H.getElementsByTagName("*");for(J=0;J<N.length;J++){I=N.item(J);if(I.nodeType!=1){continue}for(G=0;G<I.attributes.length;G++){if(!I.attributes[G].specified){continue}if(L(I,I.attributes[G])===true){if(K){return I}else{M.push(I);break}}}}if(K){return null}else{return M}},nodeExpandedName=function(I){var G,J,H,K;switch(I.nodeType){case 1:if(typeof I.scopeName!="undefined"){K={prefix:(I.scopeName=="HTML")?"":I.scopeName,name:I.nodeName}}else{G=I.nodeName.split(":");if(G.length==1){K={prefix:"",name:G[0]}}else{K={prefix:G[0],name:G[1]}}}if(!this.opts["case-sensitive"]){K.prefix=K.prefix.toLowerCase();K.name=K.name.toLowerCase()}J=nodeNamespace.call(this,I);for(H=0;H<J.length;H++){if(J[H].prefix===K.prefix){K.ns=J[H].namespaceURI;return K}}if(K.prefix===""){K.ns=null;return K}throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+K.prefix+'" on element: '+I.nodeName);break;case 2:G=I.nodeName.split(":");if(G.length==1){return{prefix:"",ns:null,name:G[0]}}K={prefix:G[0],name:G[1]};if(!this.opts["case-sensitive"]){K.prefix=K.prefix.toLowerCase();K.name=K.name.toLowerCase()}J=nodeNamespace.call(this,f(I));for(H=0;H<J.length;H++){if(J[H].prefix===K.prefix){K.ns=J[H].namespaceURI;return K}}throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+K.prefix+'" on attribute: '+I.nodeName);break;case 13:return{prefix:null,ns:null,name:((!this.opts["case-sensitive"])?I.prefix:I.prefix.toLowerCase())};break;case 7:return{prefix:null,ns:null,name:((!this.opts["case-sensitive"])?I.target:I.target.toLowerCase())};break;default:return false;break}},nodeStringValue=function(I){var H,G,J="";switch(I.nodeType){case 9:case 1:G=q(new w(I,1,1,{},{},{}),{type:"step",args:["descendant",{type:"nodeType",args:["text",[]]}]});G.sortDocumentOrder();for(H=0;H<G.value.length;H++){J+=G.value[H].data}return J;break;case 2:return I.nodeValue;break;case 13:return I.namespaceURI;break;case 7:case 8:case 3:case 4:return I.data;break;default:throw new Error("Internal Error: nodeStringValue does not support node type: "+I.nodeType);break}},createError=function(J,G,I){var H=new Error(I);H.name=G;H.code=J;return H},arrayIndexOf=function(I,H){var G=H.length;while(G--){if(H[G]===I){return G}}return false},compareOperator=function(J,M,H,I){var L,K,N,G,O;if(J instanceof h){if(M instanceof h){G=M.stringValues();N=J.stringValues();for(L=0;L<N.length;L++){for(K=0;K<G.length;K++){O=compareOperator(N[L],G[K],H,I);if(O.toBoolean()){return O}}}}else{if(M instanceof A){N=J.stringValues();for(L=0;L<N.length;L++){O=compareOperator(new A(N[L].toNumber()),M,H,I);if(O.toBoolean()){return O}}}else{if(M instanceof DateType||(M instanceof z&&M.isDateString())){if(M instanceof z){M=new DateType(M)}N=J.stringValues();for(L=0;L<N.length;L++){O=compareOperator(new DateType(N[L].toDate()),M,H,I);if(O.toBoolean()){return O}}}else{if(M instanceof z){N=J.stringValues();for(L=0;L<N.length;L++){O=compareOperator(N[L],M,H,I);if(O.toBoolean()){return O}}}else{return compareOperator(new D(J.toBoolean()),M,H,I)}}}}}else{if(M instanceof h){if(J instanceof A){G=M.stringValues();for(L=0;L<G.length;L++){O=compareOperator(J,new A(G[L].toNumber()),H,I);if(O.toBoolean()){return O}}}else{if(J instanceof DateType||(J instanceof z&&J.isDateString())){if(J instanceof z){J=new DateType(J)}G=M.stringValues();for(L=0;L<G.length;L++){O=compareOperator(J,new DateType(G[L].toDate()),H,I);if(O.toBoolean()){return O}}}else{if(J instanceof z){G=M.stringValues();for(L=0;L<G.length;L++){O=compareOperator(J,G[L],H,I);if(O.toBoolean()){return O}}}else{return compareOperator(J,new D(M.toBoolean()),H,I)}}}}else{switch(H){case"=":case"!=":if(J instanceof D||M instanceof D){return new D(I(J.toBoolean(),M.toBoolean()))}else{if(J instanceof A||M instanceof A){return new D(I(J.toNumber(),M.toNumber()))}}return new D(I(J.toString(),M.toString()));break;default:return new D(I(J.toNumber(),M.toNumber()));break}}}return new D(false)},getComparableNode=function(G){switch(G.nodeType){case 2:case 3:case 4:case 7:case 8:return f(G);break;case 1:case 9:return G;break;case 13:default:throw new Error("Internal Error: getComparableNode - Node type not supported: "+G.nodeType);break}},compareDocumentPosition=function(I,H){var G,J,K;if(I.nodeType==13&&H.nodeType==13&&I.ownerElement==H.ownerElement){if(I===H){return 0}J=nodeNamespace.call(g,I.ownerElement);for(K=0;K<J.length;K++){if(J[K]===I){G=4;break}else{if(J[K]===H){G=2;break}}}}else{if(I.nodeType==13){I=I.ownerElement}if(H.nodeType==13){H=H.ownerElement}G=compareDocumentPositionNoNamespace(I,H)}return G},compareDocumentPositionNoNamespace=function(J,I){var H,K,G,L,M,N=function(V,O,T,S,W,P,Q,R,U){if(W===0||(W&P)===P){return R+P}else{if((W&Q)===Q){return U}else{return W}}};if(J.compareDocumentPosition){return J.compareDocumentPosition(I)}if(J===I){return 0}H=getComparableNode(J);K=getComparableNode(I);if(H.nodeType===9){if(K.nodeType===9){if(H!==K){return 1}else{G=0}}else{if(H!==K.ownerDocument){return 1}else{G=4+16}}}else{if(K.nodeType===9){if(K!==H.ownerDocument){return 1}else{G=2+8}}else{if(H.ownerDocument!==K.ownerDocument){return 1}else{if(!H.contains||typeof H.sourceIndex==="undefined"||!K.contains||typeof K.sourceIndex==="undefined"){throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.')}else{G=(H!=K&&H.contains(K)&&16)+(H!=K&&K.contains(H)&&8)+(H.sourceIndex>=0&&K.sourceIndex>=0?(H.sourceIndex<K.sourceIndex&&4)+(H.sourceIndex>K.sourceIndex&&2):1)+0}}}}if(J===H&&I===K){return G}else{if(J===H){return N(J,H,I,K,G,16,8,4,2)}else{if(I===K){return N(I,K,J,H,G,8,16,2,4)}else{if((G&16)===16){return 4}else{if((G&8)===8){return 2}else{if(G===0){for(L=0;L<H.attributes.length;L++){M=H.attributes[L];if(!M.specified){continue}if(M===I){return 2}else{if(M===J){return 4}}}throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")}else{return G}}}}}}throw new Error("Internal Error: compareDocumentPosition failed to sort nodes.")},nodeSupported=function(G){if(!G){throw createError(9,"NOT_SUPPORTED_ERR","Context node was not supplied.")}else{if(G.nodeType!=9&&G.nodeType!=1&&G.nodeType!=2&&G.nodeType!=3&&G.nodeType!=4&&G.nodeType!=8&&G.nodeType!=7&&G.nodeType!=13){throw createError(9,"NOT_SUPPORTED_ERR","The supplied node type is not supported. (nodeType: "+G.nodeType+")")}else{if(G.nodeType==2&&!G.specified){throw createError(9,"NOT_SUPPORTED_ERR","The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")}}}},createNamespaceNode=function(K,J,I){var G,H;for(G=0;G<j.length;G++){H=j[G];if(H.prefix===K&&H.nodeValue===J&&H.ownerElement===I){return H}}H=new B(K,J,I);j.push(H);return H};s=function(I,H,G){this.value=I;this.type=H;this.supports=G};s.prototype={value:null,type:null,supports:[],toBoolean:function(){throw new Error('Unable to convert "'+this.type+'" to "boolean".')},toString:function(){throw new Error('Unable to convert "'+this.type+'" to "string".')},toNumber:function(){throw new Error('Unable to convert "'+this.type+'" to "number".')},toNodeSet:function(){throw new Error('Unable to convert "'+this.type+'" to "node-set".')},toDate:function(){throw new Error('Unable to convert "'+this.type+'" to "date".')},canConvertTo:function(G){return false!==arrayIndexOf(G,this.supports)}};D=function(G){s.call(this,G,"boolean",["boolean","string","number","date"])};D.prototype=new s;D.constructor=D;D.prototype.toBoolean=function(){return this.value};D.prototype.toString=function(){return(this.value===true)?"true":"false"};D.prototype.toNumber=function(){return(this.value)?1:0};D.prototype.toDate=function(){return null};h=function(H,G){s.call(this,H,"node-set",["boolean","string","number","node-set","date"]);this.docOrder=(G||"unsorted")};h.prototype=new s;h.constructor=h;h.prototype.toBoolean=function(){return(this.value.length>0)?true:false};h.prototype.toString=function(){if(this.value.length<1){return""}this.sortDocumentOrder();return nodeStringValue(this.value[0])};h.prototype.toNumber=function(){return(new z(this.toString())).toNumber()};h.prototype.toNodeSet=function(){return this.value};h.prototype.toDate=function(){return(new z(this.toString())).toDate()};h.prototype.sortDocumentOrder=function(){switch(this.docOrder){case"document-order":break;case"reverse-document-order":this.value.reverse();break;default:this.value.sort(function(I,H){var G=compareDocumentPosition(I,H);if((G&4)==4){return -1}else{if((G&2)==2){return 1}else{throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: "+G)}}});break}this.docOrder="document-order"};h.prototype.sortReverseDocumentOrder=function(){switch(this.docOrder){case"document-order":this.value.reverse();break;case"reverse-document-order":break;default:this.sortDocumentOrder();this.value.reverse();break}this.docOrder="reverse-document-order"};h.prototype.append=function(H){var K,J=0,I=0,G;if(!H instanceof h){throw new Error("NodeSetType can be passed into NodeSetType.append method")}this.sortDocumentOrder();H.sortDocumentOrder();while(J<this.value.length&&I<H.value.length){G=compareDocumentPosition(this.value[J],H.value[I]);if(G==0){I++}else{if((G&4)==4){J++}else{if((G&2)==2){this.value.splice(J,0,H.value[I]);J++;I++}else{throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: "+G+")")}}}}for(;I<H.value.length;I++){this.value.push(H.value[I])}this.docOrder="document-order"};h.prototype.stringValues=function(){var H,I,G=[];for(H=0;H<this.value.length;H++){I=new z(nodeStringValue(this.value[H]));if(I.isDateString()){I=new DateType(I.value)}G.push(I)}return G};z=function(G){s.call(this,G,"string",["boolean","string","number","date"])};z.prototype=new s;z.constructor=z;z.prototype.toBoolean=function(){return(this.value.length>0)?true:false};z.prototype.toString=function(){return this.value};z.prototype.toNumber=function(){var G;G=this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/);if(G!==null){return parseFloat(G[1])}G=this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/);if(G!==null){return parseFloat(G[1])}return Number.NaN};z.prototype.toDate=function(){return new Date(this.value)};z.prototype.isDateString=function(){if(!isNaN(this.value)){return false}if(isNaN(Date.parse(this.value))){return false}console.debug("found string value that passes check for datestringiness: "+this.value);return true};A=function(G){s.call(this,G,"number",["boolean","string","number","date"])};A.prototype=new s;A.constructor=A;A.prototype.toBoolean=function(){return(this.value!==0&&!isNaN(this.value))?true:false};A.prototype.toString=function(){return this.value.toString()};A.prototype.toNumber=function(){return this.value};A.prototype.toDate=function(){return new Date(this.value*(1000*60*60*24))};DateType=function(G){s.call(this,G,"date",["date","string","number","boolean"])};DateType.prototype=new s;DateType.constructor=DateType;DateType.prototype.toDate=function(){return new Date(this.value)};DateType.prototype.toString=function(){return new Date(this.value).toUTCString()};DateType.prototype.toNumber=function(){return(new Date(this.value).getTime())/(1000*60*60*24)};DateType.prototype.toBoolean=function(){return(new Date(this.value)!="Invalid Date")?true:false};y=function(I,H){var G;this.code=I;switch(this.code){case y.INVALID_EXPRESSION_ERR:this.name="INVALID_EXPRESSION_ERR";break;case y.TYPE_ERR:this.name="TYPE_ERR";break;default:G=new Error("Unsupported XPathException code: "+this.code);G.name="XPathExceptionInternalError";throw G;break}this.message=(H||"")};y.prototype.toString=function(){return'XPathException: "'+this.message+'", code: "'+this.code+'", name: "'+this.name+'"'};y.INVALID_EXPRESSION_ERR=51;y.TYPE_ERR=52;t=function(H){var I,G,J;for(I in H){J=false;for(G in this.opts){if(I===G){this.opts[I]=H[I];J=true;break}}if(J){continue}throw new Error("Unsupported option: "+I)}this.opts["unique-ids"][d]="id";this.opts["unique-ids"][p]="id"};t.prototype={opts:{"unique-ids":{},"case-sensitive":false},createExpression:function(N,M){var G,K,I,H={},L;try{G=XPathJS._parser.parse(N)}catch(J){K="The expression is not a legal expression.";if(J instanceof XPathJS._parser.SyntaxError){K+=" (line: "+J.line+", character: "+J.column+")"}else{K+=" ("+J.message+")"}throw new y(y.INVALID_EXPRESSION_ERR,K)}if(G.nsPrefixes.length>0){if(typeof M!="object"||typeof M.lookupNamespaceURI==="undefined"){throw new y(y.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.")}for(I=0;I<G.nsPrefixes.length;I++){L=G.nsPrefixes[I];H[L]=M.lookupNamespaceURI(L);if(H[L]===null){throw createError(14,"NAMESPACE_ERR",'Undefined namespace prefix "'+L+'" in the context of the given resolver.')}}}return new o(G,H,this.opts)},createNSResolver:function(G){return new b(G)},evaluate:function(K,H,J,I,G){var K=this.createExpression(K,J);return K.evaluate(H,I,G)}};o=function(H,G,I){this.parsedExpression=H;this.namespaceMapping=G;this.opts=I||{}};o.prototype={parsedExpression:null,namespaceMapping:null,opts:{},evaluate:function(H,J,G){var I;g=this;nodeSupported(H);I=new w(H,1,1,{},v,this.namespaceMapping,this.opts);return u.factory(I,J,q(I,this.parsedExpression.tree))}};w=function(K,G,J,M,L,I,H){this.node=K;this.pos=G;this.size=J;this.vars=M;this.fns=L;this.nsMap=I;this.opts=H||{}};w.prototype={node:null,pos:null,size:null,vars:null,fns:null,nsMap:null,opts:null,clone:function(I,G,H){return new w(I||this.node,(typeof G!="undefined")?G:this.pos,(typeof H!="undefined")?H:this.size,this.vars,this.fns,this.nsMap,this.opts)}};b=function(G){nodeSupported(G);this.node=G};b.prototype={node:null,lookupNamespaceURI:function(K){var J=this.node,G,I,H;switch(K){case"xml":return d;break;case"xmlns":return C;break;default:switch(this.node.nodeType){case 9:J=J.documentElement;break;case 1:break;default:J=f(J);break}if(J!=null&&J.nodeType==1){if(""==K){I=J.getAttribute("xmlns");if(I!==null){return I}}else{if(J.ownerDocument.documentElement===J&&typeof J.ownerDocument.namespaces==="object"){for(G=0;G<J.ownerDocument.namespaces.length;G++){I=J.ownerDocument.namespaces.item(G);if(I.name==K){return I.urn}}}else{for(G=0;G<J.attributes.length;G++){if(!J.attributes[G].specified){continue}if("xmlns:"+K==J.attributes[G].nodeName){return J.attributes[G].nodeValue}}}}if(J.ownerDocument.documentElement!==J&&J.parentNode){H=this.node;this.node=J.parentNode;I=this.lookupNamespaceURI(K);this.node=H;return I}}return null;break}}};E={"/":function(M,K){var L,J,G,H,I,N;if(M===null){G=new h([x(this.node)],"document-order")}else{G=q(this,M);if(!G instanceof h){throw new Error("Left side of path separator (/) must be of node-set type. (type: "+G.type+")")}}if(K===null){I=G}else{I=new h([],"document-order");for(J=0;J<G.value.length;J++){N=this.clone(G.value[J]);H=q(N,K);if(!H instanceof h){throw new Error("Right side of path separator (/) must be of node-set type. (type: "+H.type+")")}I.append(H)}}return I},step:function(K,L){var M,O,J,G,I,N,H;switch(K){case"child":M=new h(n(this.node),"document-order");break;case"descendant":M=new h(l(this.node),"document-order");break;case"parent":J=f(this.node);M=new h((!J)?[]:[J],"document-order");break;case"ancestor":M=new h(a(this.node),"reverse-document-order");break;case"following-sibling":M=new h(k(this.node),"document-order");break;case"preceding-sibling":M=new h(m(this.node),"reverse-document-order");break;case"following":M=new h(r(this.node),"document-order");break;case"preceding":M=new h(e(this.node),"reverse-document-order");break;case"attribute":M=new h(nodeAttribute(this.node),"document-order");break;case"namespace":M=new h(nodeNamespace.call(this,this.node),"document-order");break;case"self":M=new h([this.node],"document-order");break;case"descendant-or-self":G=l(this.node);G.unshift(this.node);M=new h(G,"document-order");break;case"ancestor-or-self":G=a(this.node);G.unshift(this.node);M=new h(G,"reverse-document-order");break;default:throw new Error("Axis type not supported: "+K);break}switch(L.type){case"nodeType":if(L.args[0]=="node"){break}for(O=M.value.length-1;O>=0;O--){switch(L.args[0]){case"text":if(M.value[O].nodeType!=3&&M.value[O].nodeType!=4){M.value.splice(O,1)}break;case"comment":if(M.value[O].nodeType!=8){M.value.splice(O,1)}break;case"processing-instruction":if(M.value[O].nodeType!=7||(L.args[1].length>0&&q(this,L.args[1][0])!=M.value[O].nodeName)){M.value.splice(O,1)}break}}break;case"name":I=q(this,L);switch(K){case"attribute":N=2;break;case"namespace":N=13;break;default:N=1;break}for(O=M.value.length-1;O>=0;O--){if(M.value[O].nodeType!=N){M.value.splice(O,1);continue}if(I.ns===null&&I.name===null){continue}H=nodeExpandedName.call(this,M.value[O]);if(H===false||H.ns!==I.ns){M.value.splice(O,1);continue}if(I.name!==null&&H.name.toLowerCase()!=I.name.toLowerCase()){M.value.splice(O,1)}}break;default:throw new Error("NodeTest type not supported in step: "+L.type);break}return M},predicate:function(H,N,I){var L,M,O,K,J,G;L=q(this,N);if(!L instanceof h){throw new Error('Expected "node-set", got: '+L.type)}switch(H){case"ancestor":case"ancestor-or-self":case"preceding":case"preceding-sibling":L.sortReverseDocumentOrder();break;default:L.sortDocumentOrder();break}for(K=0;K<I.length;K++){for(M=0,J=1,G=L.value.length;M<L.value.length;J++){O=q(this.clone(L.value[M],J,G),I[K]);if(O instanceof A){if(O.value!=J){L.value.splice(M,1);continue}}else{if(!O.toBoolean()){L.value.splice(M,1);continue}}M++}}return L},"function":function(G,O){var I,P=[],Q=function(R){return((R.ns!==null)?"{"+R.ns+"}":"{}")+R.name},N=function(R){var T,S=[],U;for(T=0;T<R.length;T++){U=(R[T].t===undefined)?"object":R[T].t;if(R[T].r!==false){if(R[T].rep===true){U+="+"}}else{if(R[T].rep===true){U+="*"}else{U+="?"}}S.push(U)}return"("+S.join(", ")+")"},J,M,K=0,L=[],H;I=q(this,G);if(I.ns===null){I.ns=""}if(!this.fns[I.ns]||!this.fns[I.ns][I.name]){throw new Error('Function "'+Q(I)+'" does not exist.')}J=this.fns[I.ns][I.name];if(!J.args){J.args=[]}for(M=0,K=0;M<J.args.length;K++,M++){if(O[K]===undefined){if(J.args[M].r!==false){throw new Error('Function "'+Q(I)+'" expects '+N(J.args)+".")}}else{L.push((J.args[M].t===undefined)?"object":J.args[M].t)}if(J.args[M].rep===true){for(;K<O.length;K++){L.push((J.args[M].t===undefined)?"object":J.args[M].t)}break}}if(L.length<O.length){throw new Error('Function "'+Q(I)+'" expects '+N(J.args)+".")}for(M=0;M<O.length;M++){H=q(this,O[M]);if(L[M]!=="object"&&!H.canConvertTo(L[M])){throw new Error('Function "'+Q(I)+'" expects '+N(J.args)+'.Cannot convert "'+H.type+'" to "'+L[M]+'".')}P.push(H)}result=J.fn.apply(this,P);if(!result instanceof s){throw new Error('Function "'+Q(I)+'" did not return a value that inherits from BaseType.')}else{if(J.ret!=="object"&&!result.canConvertTo(J.ret)){throw new Error('Function "'+Q(I)+'" return "'+result.type+'" type that cannot be converted to "'+J.ret+'".')}}return result},"|":function(H,G){H=q(this,H);G=q(this,G);if(typeof H=="undefined"||typeof G=="undefined"||!H instanceof h||!G instanceof h){throw new Error('Unable to perform union on non-"node-set" types.')}H.append(G);return H},or:function(H,G){if(q(this,H).toBoolean()){return new D(true)}return new D(q(this,G).toBoolean())},and:function(H,G){if(q(this,H).toBoolean()){return new D(q(this,G).toBoolean())}return new D(false)},"=":function(H,G){return compareOperator.call(this,q(this,H),q(this,G),"=",function(J,I){return J==I})},"!=":function(H,G){return compareOperator.call(this,q(this,H),q(this,G),"!=",function(J,I){return J!=I})},"<=":function(H,G){return compareOperator.call(this,q(this,H),q(this,G),"<=",function(J,I){return J<=I})},"<":function(H,G){return compareOperator.call(this,q(this,H),q(this,G),"<",function(J,I){return J<I})},">=":function(H,G){return compareOperator.call(this,q(this,H),q(this,G),">=",function(J,I){return J>=I})},">":function(H,G){return compareOperator.call(this,q(this,H),q(this,G),">",function(J,I){return J>I})},"+":function(H,G){return new A(q(this,H).toNumber()+q(this,G).toNumber())},"-":function(H,G){return new A(q(this,H).toNumber()-q(this,G).toNumber())},div:function(H,G){return new A(q(this,H).toNumber()/q(this,G).toNumber())},mod:function(H,G){return new A(q(this,H).toNumber()%q(this,G).toNumber())},"*":function(H,G){return new A(q(this,H).toNumber()*q(this,G).toNumber())},string:function(G){return new z(G)},number:function(G){return new A(G)},"$":function(G){throw new Error("TODO: Not implemented.16")},name:function(I,G){var H=null;if(I!==null){H=this.nsMap[I];if(!H){throw new Error('Namespace prefix "'+I+'" is not mapped to a namespace.')}}return{ns:H,name:G}}};v={"":{last:{fn:function(){return new A(this.size)},ret:"number"},position:{fn:function(){return new A(this.pos)},ret:"number"},count:{fn:function(G){return new A(G.toNodeSet().length)},args:[{t:"node-set"}],ret:"number"},id:{fn:function(K){var I=this,G=[],M,L,J,H=[],O,N=function(Q){var P,R=Q.split(/[\u0020\u0009\u000D\u000A]+/);for(P=R.length-1;P>=0;P--){if(R[P].length==0){R.splice(P,1)}}return R};if(K instanceof h){for(M=0;M<K.value.length;M++){G.push.apply(G,N(nodeStringValue(K.value[M])))}}else{K=K.toString();G=N(K)}for(M=G.length-1;M>=0;M--){for(L=M-1;L>=0;L--){if(G[M]==G[L]&&M!=L){G.splice(M,1);break}}}for(M=0;M<G.length;M++){J=x(this.node).getElementById(G[M]);if(J){if(nodeIdAttribute.call(this,J)){H.push(J);continue}}nodeAttributeSearch(x(this.node),true,function(P,R){var Q=nodeIdAttribute.call(I,P,R);if(Q&&Q.nodeValue==G[M]){H.push(P);return true}})}return new h(H)},args:[{}],ret:"node-set"},"local-name":{fn:function(H){var I,G="";if(arguments.length==0){H=new h([this.node])}if(H.toNodeSet().length>0){H.sortDocumentOrder();I=nodeExpandedName.call(this,H.value[0]);if(I!==false){G=I.name}}return new z(G)},args:[{t:"node-set",r:false}],ret:"string"},"namespace-uri":{fn:function(G){var I,H="";if(arguments.length==0){G=new h([this.node])}if(G.toNodeSet().length>0){G.sortDocumentOrder();I=nodeExpandedName.call(this,G.value[0]);if(I!==false&&I.ns!==null){H=I.ns}}return new z(H)},args:[{t:"node-set",r:false}],ret:"string"},name:{fn:function(G){var I,H="";if(arguments.length==0){G=new h([this.node])}if(G.toNodeSet().length>0){G.sortDocumentOrder();I=nodeExpandedName.call(this,G.value[0]);if(I!==false){H=(I.prefix&&I.prefix.length>0)?I.prefix+":"+I.name:I.name}}return new z(H)},args:[{t:"node-set",r:false}],ret:"string"},string:{fn:function(G){if(arguments.length==0){G=new h([this.node],"document-order")}return new z(G.toString())},args:[{t:"object",r:false}],ret:"string"},concat:{fn:function(J,H){var G,I="";for(G=0;G<arguments.length;G++){I+=arguments[G].toString()}return new z(I)},args:[{t:"string"},{t:"string"},{t:"string",r:false,rep:true}],ret:"string"},"starts-with":{fn:function(G,H){return new D(G.toString().substr(0,(H=H.toString()).length)==H)},args:[{t:"string"},{t:"string"}],ret:"string"},contains:{fn:function(G,H){return new D(G.toString().indexOf(H=H.toString())!=-1)},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-before":{fn:function(G,H){G=G.toString();H=G.indexOf(H.toString());return new z(H==-1?"":G.substr(0,H))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-after":{fn:function(G,H){var I;G=G.toString();H=H.toString();I=G.indexOf(H);return new z(I==-1?"":G.substr(I+H.length))},args:[{t:"string"},{t:"string"}],ret:"string"},substring:{fn:function(H,I,G){H=H.toString();I=Math.round(I.toNumber())-1;return new z(isNaN(I)?"":((arguments.length==2)?H.substring(I<0?0:I):H.substring(I<0?0:I,I+Math.round(G.toNumber()))))},args:[{t:"string"},{t:"number"},{t:"number",r:false}],ret:"string"},"string-length":{fn:function(G){G=(arguments.length==0)?nodeStringValue(this.node):G.toString();return new A(G.length)},args:[{t:"string",r:false}],ret:"number"},"normalize-space":{fn:function(G){G=(arguments.length==0)?nodeStringValue(this.node):G.toString();return new z(G.replace(/^[\u0020\u0009\u000D\u000A]+/,"").replace(/[\u0020\u0009\u000D\u000A]+$/,"").replace(/[\u0020\u0009\u000D\u000A]+/g," "))},args:[{t:"string",r:false}],ret:"string"},translate:{fn:function(M,L,K){var H="",J,I,G;M=M.toString();L=L.toString();K=K.toString();for(J=0;J<M.length;J++){if((I=L.indexOf(G=M.charAt(J)))==-1||(G=K.charAt(I))){H+=G}}return new z(H)},args:[{t:"string"},{t:"string"},{t:"string"}],ret:"string"},"boolean":{fn:function(G){return new D(G.toBoolean())},args:[{r:true}],ret:"boolean"},not:{fn:function(G){return new D(!G.toBoolean())},args:[{t:"boolean"}],ret:"boolean"},"true":{fn:function(){return new D(true)},ret:"boolean"},"false":{fn:function(){return new D(false)},ret:"boolean"},lang:{fn:function(M){var G=this.node,K,N,P,O=M.toString().toLowerCase().split("-"),H,L,J,I;for(;G.nodeType!=9;G=f(G)){K=nodeAttribute(G);for(L=0;L<K.length;L++){N=K[L].nodeName.split(":");if(N.length===1){N[1]=N[0];N[0]=""}if(N[1]=="lang"){P=K[L].nodeValue.toLowerCase().split("-");if(P.length<O.length){continue}I=true;for(J=0;J<O.length;J++){if(O[J]!=P[J]){I=false;break}}if(I){H=nodeNamespace.call(this,G);for(J=0;J<H.length;J++){if(H[J].prefix==N[0]&&H[J].nodeValue==d){return new D(true)}}}}}}return new D(false)},args:[{t:"string"}],ret:"boolean"},number:{fn:function(G){if(arguments.length==0){G=new h([this.node],"document-order")}return new A(G.toNumber())},args:[{t:"object",r:false}],ret:"number"},sum:{fn:function(G){var H,I=0;G=G.toNodeSet();for(H=0;H<G.length;H++){I+=(new z(nodeStringValue(G[H]))).toNumber()}return new A(I)},args:[{t:"node-set"}],ret:"number"},floor:{fn:function(G){return new A(Math.floor(G))},args:[{t:"number"}],ret:"number"},ceiling:{fn:function(G){return new A(Math.ceil(G))},args:[{t:"number"}],ret:"number"},round:{fn:function(G){return new A(Math.round(G))},args:[{t:"number"}],ret:"number"},sum_jr:{fn:function(G){var H,I;sum=0;G=G.toNodeSet();for(H=0;H<G.length;H++){I=(nodeStringValue(G[H])=="")?"0":nodeStringValue(G[H]);sum+=(new z(I)).toNumber()}return new A(sum)},args:[{t:"node-set"}],ret:"number"},selected:{fn:function(I,J){var H,G;J=J.toString().trim();G=I.toString();return new D((" "+G+" ").indexOf(" "+J+" ")!=-1)},args:[{t:"object"},{t:"string"}],ret:"boolean"},"count-selected":{fn:function(H){var G=[];H=H.toNodeSet();if(H.length>0){G=nodeStringValue(H[0]).trim().split(" ");return(G.length==1&&G[0]==="")?new A(0):new A(G.length)}return new A(0)},args:[{t:"node-set"}],ret:"number"},checklist:{fn:function(K,G,H){var J,I,L=0;K=K.toNumber();G=G.toNumber();for(J=2;J<arguments.length;J++){if(arguments[J] instanceof h){for(I=0;I<arguments[J].stringValues().length;I++){if(arguments[J].stringValues()[I].toBoolean()===true){L++}}}else{if(arguments[J].toBoolean()===true){L++}}}return new D((K<0||L>=K)&&(G<0||L<=G))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object",r:false,rep:true}],ret:"boolean"},"boolean-from-string":{fn:function(G){return new D(G.toString().toLowerCase()==="true"||String(G)==="1")},args:[{t:"string"}],ret:"boolean"},"if":{fn:function(I,H,G){return(I.toBoolean()?H:G)},args:[{t:"object"},{t:"object"},{t:"object"}],ret:"object"},date:{fn:function(G){return new DateType(G.toDate())},args:[{t:"object"}],ret:"string"},today:{fn:function(){var G=new Date();return new DateType(new Date(G.getFullYear(),G.getMonth(),G.getDate()))},ret:"string"},now:{fn:function(){return new DateType(new Date())},ret:"string"},regex:{fn:function(J,I){var H,G;H=J.toString();G=new RegExp(I);return new D(G.test(H))},args:[{t:"object"},{t:"string"}],ret:"boolean"}}};q=function(H,G){if(typeof E[G.type]!="function"){throw new Error("Internal Error: Expression type does not exist: "+G.type)}return E[G.type].apply(H,G.args)};u=function(G,H,I){switch(H){case u.NUMBER_TYPE:this.resultType=u.NUMBER_TYPE;this.numberValue=I.toNumber();break;case u.STRING_TYPE:this.resultType=u.STRING_TYPE;this.stringValue=I.toString();break;case u.BOOLEAN_TYPE:this.resultType=u.BOOLEAN_TYPE;this.booleanValue=I.toBoolean();break;case u.UNORDERED_NODE_ITERATOR_TYPE:case u.ORDERED_NODE_ITERATOR_TYPE:case u.UNORDERED_NODE_SNAPSHOT_TYPE:case u.ORDERED_NODE_SNAPSHOT_TYPE:case u.ANY_UNORDERED_NODE_TYPE:case u.FIRST_ORDERED_NODE_TYPE:if(!I instanceof h){throw new Error('Expected result of type "node-set", got: "'+I.type+'"')}this.resultType=H;switch(H){case u.UNORDERED_NODE_ITERATOR_TYPE:case u.UNORDERED_NODE_SNAPSHOT_TYPE:this._value=I.toNodeSet();this.snapshotLength=this._value.length;break;case u.ORDERED_NODE_ITERATOR_TYPE:case u.ORDERED_NODE_SNAPSHOT_TYPE:I.sortDocumentOrder();this._value=I.toNodeSet();this.snapshotLength=this._value.length;break;case u.ANY_UNORDERED_NODE_TYPE:I=I.toNodeSet();this.singleNodeValue=(I.length)?I[0]:null;break;case u.FIRST_ORDERED_NODE_TYPE:I.sortDocumentOrder();I=I.toNodeSet();this.singleNodeValue=(I.length)?I[0]:null;break;default:throw new y(y.TYPE_ERR,"XPath result type not supported. (type: "+H+")");break}break;default:throw new y(y.TYPE_ERR,"XPath result type not supported. (type: "+H+")");break}};u.factory=function(H,I,J){var G;if(I!==u.ANY_TYPE){return new u(H,I,J)}if(J instanceof h){G=new u(H,u.UNORDERED_NODE_ITERATOR_TYPE,J)}else{if(J instanceof A){G=new u(H,u.NUMBER_TYPE,J)}else{if(J instanceof D){G=new u(H,u.BOOLEAN_TYPE,J)}else{if(J instanceof z){G=new u(H,u.STRING_TYPE,J)}else{throw new y(y.TYPE_ERR,"Internal Error: Unsupported value type: "+typeof J)}}}}return G};u.prototype={resultType:null,numberValue:null,stringValue:null,booleanValue:null,singleNodeValue:null,invalidIteratorState:null,snapshotLength:null,_iteratorIndex:0,iterateNext:function(){if(this.resultType!=u.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=u.ORDERED_NODE_ITERATOR_TYPE){throw new y(y.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE")}if(this._iteratorIndex<this._value.length){return this._value[this._iteratorIndex++]}return null},snapshotItem:function(G){if(this.resultType!=u.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=u.ORDERED_NODE_SNAPSHOT_TYPE){throw new y(y.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE")}return this._value[G]}};u.ANY_TYPE=0;u.NUMBER_TYPE=1;u.STRING_TYPE=2;u.BOOLEAN_TYPE=3;u.UNORDERED_NODE_ITERATOR_TYPE=4;u.ORDERED_NODE_ITERATOR_TYPE=5;u.UNORDERED_NODE_SNAPSHOT_TYPE=6;u.ORDERED_NODE_SNAPSHOT_TYPE=7;u.ANY_UNORDERED_NODE_TYPE=8;u.FIRST_ORDERED_NODE_TYPE=9;B=function(I,G,H){if(H.nodeType!=1){throw new Error("Internal Error: XPathNamespace owner element must be an Element node.")}this.ownerElement=H;this.ownerDocument=H.ownerDocument;this.nodeName="#namespace";this.prefix=I;this.localName=I;this.nodeType=B.XPATH_NAMESPACE_NODE;this.namespaceURI=G;this.nodeValue=G};B.XPATH_NAMESPACE_NODE=13;c={XPathException:y,XPathEvaluator:t,XPathNSResolver:b,XPathExpression:o,XPathResult:u,XPathNamespace:B,getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(G){var H=new t(G);return{window:{XPathException:y,XPathExpression:o,XPathNSResolver:b,XPathResult:u,XPathNamespace:B},document:{createExpression:function(){return H.createExpression.apply(H,arguments)},createNSResolver:function(){return H.createNSResolver.apply(H,arguments)},evaluate:function(){return H.evaluate.apply(H,arguments)}}}},bindDomLevel3XPath:function(J){var H=(J||c.createDomLevel3XPathBindings()),I=c.getCurrentDomLevel3XPathBindings(),G;for(G in H.window){window[G]=H.window[G]}for(G in H.document){document[G]=H.document[G]}return I}};return c})();XPathJS._parser=(function(){function b(c){return'"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var a={parse:function(f,q){var e={XPath:F,LocationPath:o,AbsoluteLocationPath:ag,RelativeLocationPath:D,Step:A,AxisSpecifier:W,AxisName:c,NodeTest:p,Predicate:J,AbbreviatedAbsoluteLocationPath:ak,AbbreviatedStep:R,AbbreviatedAxisSpecifier:ac,Expr:L,PrimaryExpr:K,FunctionCall:ad,UnionExpr:af,PathExpr:x,FilterExpr:r,OrExpr:S,AndExpr:n,EqualityExpr:ai,RelationalExpr:w,AdditiveExpr:k,MultiplicativeExpr:d,UnaryExpr:B,Literal:ap,Number:am,Digits:ah,MultiplyOperator:ae,FunctionName:m,VariableReference:O,NameTest:T,NodeType:ao,S:U,_:P,QName:ab,PrefixedName:z,UnprefixedName:v,NCName:I,NameStartChar:C,NameChar:t,Name:g};if(q!==undefined){if(e[q]===undefined){throw new Error("Invalid rule name: "+b(q)+".")}}else{q="XPath"}var M=0;var Z=0;var h=0;var s=[];function aj(ar,aw,au){var aq=ar;var av=au-ar.length;for(var at=0;at<av;at++){aq=aw+aq}return aq}function E(at){var ar=at.charCodeAt(0);var aq;var au;if(ar<=255){aq="x";au=2}else{aq="u";au=4}return"\\"+aq+aj(ar.toString(16).toUpperCase(),"0",au)}function u(aq){if(M<h){return}if(M>h){h=M;s=[]}s.push(aq)}function F(){var au,ar,aq;var av,at;av=M;at=M;au=P();if(au!==null){ar=L();if(ar!==null){aq=P();if(aq!==null){au=[au,ar,aq]}else{au=null;M=at}}else{au=null;M=at}}else{au=null;M=at}if(au!==null){au=(function(ax,aw){return{tree:aw,nsPrefixes:N}})(av,au[1])}if(au===null){M=av}return au}function o(){var aq;aq=D();if(aq===null){aq=ag()}return aq}function ag(){var av,at,aq;var aw,au,ar;av=ak();if(av===null){aw=M;au=M;if(f.charCodeAt(M)===47){av="/";M++}else{av=null;if(Z===0){u('"/"')}}if(av!==null){ar=M;at=P();if(at!==null){aq=D();if(aq!==null){at=[at,aq]}else{at=null;M=ar}}else{at=null;M=ar}at=at!==null?at:"";if(at!==null){av=[av,at]}else{av=null;M=au}}else{av=null;M=au}if(av!==null){av=(function(ay,ax){return{type:"/",args:[null,(ax)?ax[1]:null]}})(aw,av[1])}if(av===null){M=aw}}return av}function D(){var aw,av,au,at,ar,aq;var az,ay,ax;az=M;ay=M;aw=A();if(aw!==null){av=[];ax=M;au=P();if(au!==null){if(f.substr(M,2)==="//"){at="//";M+=2}else{at=null;if(Z===0){u('"//"')}}if(at===null){if(f.charCodeAt(M)===47){at="/";M++}else{at=null;if(Z===0){u('"/"')}}}if(at!==null){ar=P();if(ar!==null){aq=A();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}while(au!==null){av.push(au);ax=M;au=P();if(au!==null){if(f.substr(M,2)==="//"){at="//";M+=2}else{at=null;if(Z===0){u('"//"')}}if(at===null){if(f.charCodeAt(M)===47){at="/";M++}else{at=null;if(Z===0){u('"/"')}}}if(at!==null){ar=P();if(ar!==null){aq=A();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}if(av!==null){aw=[aw,av]}else{aw=null;M=ay}}else{aw=null;M=ay}if(aw!==null){aw=(function(aD,aB,aC){var aA;for(aA=0;aA<aC.length;aA++){aB=an(aC[aA][1],aB,aC[aA][3])}return aB})(az,aw[0],aw[1])}if(aw===null){M=az}return aw}function A(){var aw,av,au,at,ar,aq;var az,ay,ax;az=M;ay=M;aw=W();if(aw!==null){av=P();if(av!==null){au=p();if(au!==null){at=[];ax=M;ar=P();if(ar!==null){aq=J();if(aq!==null){ar=[ar,aq]}else{ar=null;M=ax}}else{ar=null;M=ax}while(ar!==null){at.push(ar);ax=M;ar=P();if(ar!==null){aq=J();if(aq!==null){ar=[ar,aq]}else{ar=null;M=ax}}else{ar=null;M=ax}}if(at!==null){aw=[aw,av,au,at]}else{aw=null;M=ay}}else{aw=null;M=ay}}else{aw=null;M=ay}}else{aw=null;M=ay}if(aw!==null){aw=(function(aD,aB,aC,aA){return j({type:"step",args:[aB,aC]},aB,aA,1)})(az,aw[0],aw[2],aw[3])}if(aw===null){M=az}if(aw===null){aw=R()}return aw}function W(){var au,ar,aq;var av,at;av=M;at=M;au=c();if(au!==null){ar=P();if(ar!==null){if(f.substr(M,2)==="::"){aq="::";M+=2}else{aq=null;if(Z===0){u('"::"')}}if(aq!==null){au=[au,ar,aq]}else{au=null;M=at}}else{au=null;M=at}}else{au=null;M=at}if(au!==null){au=(function(ax,aw){return aw})(av,au[0])}if(au===null){M=av}if(au===null){av=M;au=ac();if(au!==null){au=(function(ax,aw){return(aw.length)?aw:"child"})(av,au)}if(au===null){M=av}}return au}function c(){var aq;if(f.substr(M,16)==="ancestor-or-self"){aq="ancestor-or-self";M+=16}else{aq=null;if(Z===0){u('"ancestor-or-self"')}}if(aq===null){if(f.substr(M,8)==="ancestor"){aq="ancestor";M+=8}else{aq=null;if(Z===0){u('"ancestor"')}}if(aq===null){if(f.substr(M,9)==="attribute"){aq="attribute";M+=9}else{aq=null;if(Z===0){u('"attribute"')}}if(aq===null){if(f.substr(M,5)==="child"){aq="child";M+=5}else{aq=null;if(Z===0){u('"child"')}}if(aq===null){if(f.substr(M,18)==="descendant-or-self"){aq="descendant-or-self";M+=18}else{aq=null;if(Z===0){u('"descendant-or-self"')}}if(aq===null){if(f.substr(M,10)==="descendant"){aq="descendant";M+=10}else{aq=null;if(Z===0){u('"descendant"')}}if(aq===null){if(f.substr(M,17)==="following-sibling"){aq="following-sibling";M+=17}else{aq=null;if(Z===0){u('"following-sibling"')}}if(aq===null){if(f.substr(M,9)==="following"){aq="following";M+=9}else{aq=null;if(Z===0){u('"following"')}}if(aq===null){if(f.substr(M,9)==="namespace"){aq="namespace";M+=9}else{aq=null;if(Z===0){u('"namespace"')}}if(aq===null){if(f.substr(M,6)==="parent"){aq="parent";M+=6}else{aq=null;if(Z===0){u('"parent"')}}if(aq===null){if(f.substr(M,17)==="preceding-sibling"){aq="preceding-sibling";M+=17}else{aq=null;if(Z===0){u('"preceding-sibling"')}}if(aq===null){if(f.substr(M,9)==="preceding"){aq="preceding";M+=9}else{aq=null;if(Z===0){u('"preceding"')}}if(aq===null){if(f.substr(M,4)==="self"){aq="self";M+=4}else{aq=null;if(Z===0){u('"self"')}}}}}}}}}}}}}}return aq}function p(){var ax,aw,av,au,at,ar,aq;var az,ay;az=M;ay=M;ax=ao();if(ax!==null){aw=P();if(aw!==null){if(f.charCodeAt(M)===40){av="(";M++}else{av=null;if(Z===0){u('"("')}}if(av!==null){au=P();if(au!==null){if(f.charCodeAt(M)===41){at=")";M++}else{at=null;if(Z===0){u('")"')}}if(at!==null){ax=[ax,aw,av,au,at]}else{ax=null;M=ay}}else{ax=null;M=ay}}else{ax=null;M=ay}}else{ax=null;M=ay}}else{ax=null;M=ay}if(ax!==null){ax=(function(aB,aA){return{type:"nodeType",args:[aA,[]]}})(az,ax[0])}if(ax===null){M=az}if(ax===null){az=M;ay=M;if(f.substr(M,22)==="processing-instruction"){ax="processing-instruction";M+=22}else{ax=null;if(Z===0){u('"processing-instruction"')}}if(ax!==null){aw=P();if(aw!==null){if(f.charCodeAt(M)===40){av="(";M++}else{av=null;if(Z===0){u('"("')}}if(av!==null){au=P();if(au!==null){at=ap();if(at!==null){ar=P();if(ar!==null){if(f.charCodeAt(M)===41){aq=")";M++}else{aq=null;if(Z===0){u('")"')}}if(aq!==null){ax=[ax,aw,av,au,at,ar,aq]}else{ax=null;M=ay}}else{ax=null;M=ay}}else{ax=null;M=ay}}else{ax=null;M=ay}}else{ax=null;M=ay}}else{ax=null;M=ay}}else{ax=null;M=ay}if(ax!==null){ax=(function(aC,aB,aA){return{type:"nodeType",args:[aB,[aA]]}})(az,ax[0],ax[4])}if(ax===null){M=az}if(ax===null){az=M;ax=T();if(ax!==null){ax=(function(aB,aA){return aA})(az,ax)}if(ax===null){M=az}}}return ax}function J(){var aw,au,at,ar,aq;var ax,av;ax=M;av=M;if(f.charCodeAt(M)===91){aw="[";M++}else{aw=null;if(Z===0){u('"["')}}if(aw!==null){au=P();if(au!==null){at=L();if(at!==null){ar=P();if(ar!==null){if(f.charCodeAt(M)===93){aq="]";M++}else{aq=null;if(Z===0){u('"]"')}}if(aq!==null){aw=[aw,au,at,ar,aq]}else{aw=null;M=av}}else{aw=null;M=av}}else{aw=null;M=av}}else{aw=null;M=av}}else{aw=null;M=av}if(aw!==null){aw=(function(az,ay){return ay})(ax,aw[2])}if(aw===null){M=ax}return aw}function ak(){var au,ar,aq;var av,at;av=M;at=M;if(f.substr(M,2)==="//"){au="//";M+=2}else{au=null;if(Z===0){u('"//"')}}if(au!==null){ar=P();if(ar!==null){aq=D();if(aq!==null){au=[au,ar,aq]}else{au=null;M=at}}else{au=null;M=at}}else{au=null;M=at}if(au!==null){au=(function(ax,aw){return an("//",null,aw)})(av,au[2])}if(au===null){M=av}return au}function R(){var aq;var ar;ar=M;if(f.substr(M,2)===".."){aq="..";M+=2}else{aq=null;if(Z===0){u('".."')}}if(aq===null){if(f.charCodeAt(M)===46){aq=".";M++}else{aq=null;if(Z===0){u('"."')}}}if(aq!==null){aq=(function(av,au){var at={type:"step",args:["self",{type:"nodeType",args:["node",[]]}]};if(au==".."){at.args[0]="parent"}return at})(ar,aq)}if(aq===null){M=ar}return aq}function ac(){var aq;var ar;ar=M;if(f.charCodeAt(M)===64){aq="@";M++}else{aq=null;if(Z===0){u('"@"')}}aq=aq!==null?aq:"";if(aq!==null){aq=(function(au,at){return(at)?"attribute":""})(ar,aq)}if(aq===null){M=ar}return aq}function L(){var aq;var ar;ar=M;aq=S();if(aq!==null){aq=(function(au,at){return at})(ar,aq)}if(aq===null){M=ar}return aq}function K(){var aw,au,at,ar,aq;var ax,av;ax=M;aw=O();if(aw!==null){aw=(function(az,ay){return ay})(ax,aw)}if(aw===null){M=ax}if(aw===null){ax=M;av=M;if(f.charCodeAt(M)===40){aw="(";M++}else{aw=null;if(Z===0){u('"("')}}if(aw!==null){au=P();if(au!==null){at=L();if(at!==null){ar=P();if(ar!==null){if(f.charCodeAt(M)===41){aq=")";M++}else{aq=null;if(Z===0){u('")"')}}if(aq!==null){aw=[aw,au,at,ar,aq]}else{aw=null;M=av}}else{aw=null;M=av}}else{aw=null;M=av}}else{aw=null;M=av}}else{aw=null;M=av}if(aw!==null){aw=(function(az,ay){return ay})(ax,aw[2])}if(aw===null){M=ax}if(aw===null){ax=M;aw=ap();if(aw!==null){aw=(function(az,ay){return ay})(ax,aw)}if(aw===null){M=ax}if(aw===null){ax=M;aw=am();if(aw!==null){aw=(function(ay,az){return az})(ax,aw)}if(aw===null){M=ax}if(aw===null){aw=ad()}}}}return aw}function ad(){var ay,ax,aw,av,au,at,ar,aq,aE,aD;var aC,aB,aA,az;aC=M;aB=M;ay=m();if(ay!==null){ax=P();if(ax!==null){if(f.charCodeAt(M)===40){aw="(";M++}else{aw=null;if(Z===0){u('"("')}}if(aw!==null){aA=M;av=P();if(av!==null){au=L();if(au!==null){at=[];az=M;ar=P();if(ar!==null){if(f.charCodeAt(M)===44){aq=",";M++}else{aq=null;if(Z===0){u('","')}}if(aq!==null){aE=P();if(aE!==null){aD=L();if(aD!==null){ar=[ar,aq,aE,aD]}else{ar=null;M=az}}else{ar=null;M=az}}else{ar=null;M=az}}else{ar=null;M=az}while(ar!==null){at.push(ar);az=M;ar=P();if(ar!==null){if(f.charCodeAt(M)===44){aq=",";M++}else{aq=null;if(Z===0){u('","')}}if(aq!==null){aE=P();if(aE!==null){aD=L();if(aD!==null){ar=[ar,aq,aE,aD]}else{ar=null;M=az}}else{ar=null;M=az}}else{ar=null;M=az}}else{ar=null;M=az}}if(at!==null){av=[av,au,at]}else{av=null;M=aA}}else{av=null;M=aA}}else{av=null;M=aA}av=av!==null?av:"";if(av!==null){au=P();if(au!==null){if(f.charCodeAt(M)===41){at=")";M++}else{at=null;if(Z===0){u('")"')}}if(at!==null){ay=[ay,ax,aw,av,au,at]}else{ay=null;M=aB}}else{ay=null;M=aB}}else{ay=null;M=aB}}else{ay=null;M=aB}}else{ay=null;M=aB}}else{ay=null;M=aB}if(ay!==null){ay=(function(aJ,aH,aF){var aI,aG=[];if(aF){aG.push(aF[1]);for(aI=0;aI<aF[2].length;aI++){aG.push(aF[2][aI][3])}}return{type:"function",args:[aH,aG]}})(aC,ay[0],ay[3])}if(ay===null){M=aC}return ay}function af(){var aw,av,au,at,ar,aq;var az,ay,ax;az=M;ay=M;aw=x();if(aw!==null){av=[];ax=M;au=P();if(au!==null){if(f.charCodeAt(M)===124){at="|";M++}else{at=null;if(Z===0){u('"|"')}}if(at!==null){ar=P();if(ar!==null){aq=x();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}while(au!==null){av.push(au);ax=M;au=P();if(au!==null){if(f.charCodeAt(M)===124){at="|";M++}else{at=null;if(Z===0){u('"|"')}}if(at!==null){ar=P();if(ar!==null){aq=x();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}if(av!==null){aw=[aw,av]}else{aw=null;M=ay}}else{aw=null;M=ay}if(aw!==null){aw=(function(aC,aA,aB){return al(aA,aB,1,3)})(az,aw[0],aw[1])}if(aw===null){M=az}return aw}function x(){var ax,av,at,ar,aq;var ay,aw,au;ay=M;aw=M;ax=r();if(ax!==null){au=M;av=P();if(av!==null){if(f.substr(M,2)==="//"){at="//";M+=2}else{at=null;if(Z===0){u('"//"')}}if(at===null){if(f.charCodeAt(M)===47){at="/";M++}else{at=null;if(Z===0){u('"/"')}}}if(at!==null){ar=P();if(ar!==null){aq=D();if(aq!==null){av=[av,at,ar,aq]}else{av=null;M=au}}else{av=null;M=au}}else{av=null;M=au}}else{av=null;M=au}av=av!==null?av:"";if(av!==null){ax=[ax,av]}else{ax=null;M=aw}}else{ax=null;M=aw}if(ax!==null){ax=(function(aB,aA,az){if(!az){return aA}return an(az[1],aA,az[3])})(ay,ax[0],ax[1])}if(ax===null){M=ay}if(ax===null){ay=M;ax=o();if(ax!==null){ax=(function(aA,az){return az})(ay,ax)}if(ax===null){M=ay}}return ax}function r(){var aw,au,ar,aq;var ax,av,at;ax=M;av=M;aw=K();if(aw!==null){au=[];at=M;ar=P();if(ar!==null){aq=J();if(aq!==null){ar=[ar,aq]}else{ar=null;M=at}}else{ar=null;M=at}while(ar!==null){au.push(ar);at=M;ar=P();if(ar!==null){aq=J();if(aq!==null){ar=[ar,aq]}else{ar=null;M=at}}else{ar=null;M=at}}if(au!==null){aw=[aw,au]}else{aw=null;M=av}}else{aw=null;M=av}if(aw!==null){aw=(function(aA,ay,az){return j(ay,"child",az,1)})(ax,aw[0],aw[1])}if(aw===null){M=ax}return aw}function S(){var aw,av,au,at,ar,aq;var az,ay,ax;az=M;ay=M;aw=n();if(aw!==null){av=[];ax=M;au=P();if(au!==null){if(f.substr(M,2)==="or"){at="or";M+=2}else{at=null;if(Z===0){u('"or"')}}if(at!==null){ar=P();if(ar!==null){aq=n();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}while(au!==null){av.push(au);ax=M;au=P();if(au!==null){if(f.substr(M,2)==="or"){at="or";M+=2}else{at=null;if(Z===0){u('"or"')}}if(at!==null){ar=P();if(ar!==null){aq=n();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}if(av!==null){aw=[aw,av]}else{aw=null;M=ay}}else{aw=null;M=ay}if(aw!==null){aw=(function(aC,aA,aB){return al(aA,aB,1,3)})(az,aw[0],aw[1])}if(aw===null){M=az}return aw}function n(){var aw,av,au,at,ar,aq;var az,ay,ax;az=M;ay=M;aw=ai();if(aw!==null){av=[];ax=M;au=P();if(au!==null){if(f.substr(M,3)==="and"){at="and";M+=3}else{at=null;if(Z===0){u('"and"')}}if(at!==null){ar=P();if(ar!==null){aq=ai();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}while(au!==null){av.push(au);ax=M;au=P();if(au!==null){if(f.substr(M,3)==="and"){at="and";M+=3}else{at=null;if(Z===0){u('"and"')}}if(at!==null){ar=P();if(ar!==null){aq=ai();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}if(av!==null){aw=[aw,av]}else{aw=null;M=ay}}else{aw=null;M=ay}if(aw!==null){aw=(function(aC,aA,aB){return al(aA,aB,1,3)})(az,aw[0],aw[1])}if(aw===null){M=az}return aw}function ai(){var aw,av,au,at,ar,aq;var az,ay,ax;az=M;ay=M;aw=w();if(aw!==null){av=[];ax=M;au=P();if(au!==null){if(f.charCodeAt(M)===61){at="=";M++}else{at=null;if(Z===0){u('"="')}}if(at===null){if(f.substr(M,2)==="!="){at="!=";M+=2}else{at=null;if(Z===0){u('"!="')}}}if(at!==null){ar=P();if(ar!==null){aq=w();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}while(au!==null){av.push(au);ax=M;au=P();if(au!==null){if(f.charCodeAt(M)===61){at="=";M++}else{at=null;if(Z===0){u('"="')}}if(at===null){if(f.substr(M,2)==="!="){at="!=";M+=2}else{at=null;if(Z===0){u('"!="')}}}if(at!==null){ar=P();if(ar!==null){aq=w();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}if(av!==null){aw=[aw,av]}else{aw=null;M=ay}}else{aw=null;M=ay}if(aw!==null){aw=(function(aC,aA,aB){return al(aA,aB,1,3)})(az,aw[0],aw[1])}if(aw===null){M=az}return aw}function w(){var aw,av,au,at,ar,aq;var az,ay,ax;az=M;ay=M;aw=k();if(aw!==null){av=[];ax=M;au=P();if(au!==null){if(f.substr(M,2)==="<="){at="<=";M+=2}else{at=null;if(Z===0){u('"<="')}}if(at===null){if(f.charCodeAt(M)===60){at="<";M++}else{at=null;if(Z===0){u('"<"')}}if(at===null){if(f.substr(M,2)===">="){at=">=";M+=2}else{at=null;if(Z===0){u('">="')}}if(at===null){if(f.charCodeAt(M)===62){at=">";M++}else{at=null;if(Z===0){u('">"')}}}}}if(at!==null){ar=P();if(ar!==null){aq=k();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}while(au!==null){av.push(au);ax=M;au=P();if(au!==null){if(f.substr(M,2)==="<="){at="<=";M+=2}else{at=null;if(Z===0){u('"<="')}}if(at===null){if(f.charCodeAt(M)===60){at="<";M++}else{at=null;if(Z===0){u('"<"')}}if(at===null){if(f.substr(M,2)===">="){at=">=";M+=2}else{at=null;if(Z===0){u('">="')}}if(at===null){if(f.charCodeAt(M)===62){at=">";M++}else{at=null;if(Z===0){u('">"')}}}}}if(at!==null){ar=P();if(ar!==null){aq=k();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}if(av!==null){aw=[aw,av]}else{aw=null;M=ay}}else{aw=null;M=ay}if(aw!==null){aw=(function(aC,aA,aB){return al(aA,aB,1,3)})(az,aw[0],aw[1])}if(aw===null){M=az}return aw}function k(){var aw,av,au,at,ar,aq;var az,ay,ax;az=M;ay=M;aw=d();if(aw!==null){av=[];ax=M;au=P();if(au!==null){if(f.charCodeAt(M)===43){at="+";M++}else{at=null;if(Z===0){u('"+"')}}if(at===null){if(f.charCodeAt(M)===45){at="-";M++}else{at=null;if(Z===0){u('"-"')}}}if(at!==null){ar=P();if(ar!==null){aq=d();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}while(au!==null){av.push(au);ax=M;au=P();if(au!==null){if(f.charCodeAt(M)===43){at="+";M++}else{at=null;if(Z===0){u('"+"')}}if(at===null){if(f.charCodeAt(M)===45){at="-";M++}else{at=null;if(Z===0){u('"-"')}}}if(at!==null){ar=P();if(ar!==null){aq=d();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}if(av!==null){aw=[aw,av]}else{aw=null;M=ay}}else{aw=null;M=ay}if(aw!==null){aw=(function(aC,aA,aB){return al(aA,aB,1,3)})(az,aw[0],aw[1])}if(aw===null){M=az}return aw}function d(){var aw,av,au,at,ar,aq;var az,ay,ax;az=M;ay=M;aw=B();if(aw!==null){av=[];ax=M;au=P();if(au!==null){at=ae();if(at===null){if(f.substr(M,3)==="div"){at="div";M+=3}else{at=null;if(Z===0){u('"div"')}}if(at===null){if(f.substr(M,3)==="mod"){at="mod";M+=3}else{at=null;if(Z===0){u('"mod"')}}}}if(at!==null){ar=P();if(ar!==null){aq=B();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}while(au!==null){av.push(au);ax=M;au=P();if(au!==null){at=ae();if(at===null){if(f.substr(M,3)==="div"){at="div";M+=3}else{at=null;if(Z===0){u('"div"')}}if(at===null){if(f.substr(M,3)==="mod"){at="mod";M+=3}else{at=null;if(Z===0){u('"mod"')}}}}if(at!==null){ar=P();if(ar!==null){aq=B();if(aq!==null){au=[au,at,ar,aq]}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}else{au=null;M=ax}}if(av!==null){aw=[aw,av]}else{aw=null;M=ay}}else{aw=null;M=ay}if(aw!==null){aw=(function(aC,aA,aB){return al(aA,aB,1,3)})(az,aw[0],aw[1])}if(aw===null){M=az}return aw}function B(){var au,ar,aq;var av,at;av=M;au=af();if(au!==null){au=(function(ax,aw){return aw})(av,au)}if(au===null){M=av}if(au===null){av=M;at=M;if(f.charCodeAt(M)===45){au="-";M++}else{au=null;if(Z===0){u('"-"')}}if(au!==null){ar=P();if(ar!==null){aq=B();if(aq!==null){au=[au,ar,aq]}else{au=null;M=at}}else{au=null;M=at}}else{au=null;M=at}if(au!==null){au=(function(ax,aw){return{type:"*",args:[{type:"number",args:[-1]},aw]}})(av,au[2])}if(au===null){M=av}}return au}function ap(){var au,ar,aq;var av,at;av=M;at=M;if(f.charCodeAt(M)===34){au='"';M++}else{au=null;if(Z===0){u('"\\""')}}if(au!==null){ar=[];if(/^[^"]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u('[^"]')}}while(aq!==null){ar.push(aq);if(/^[^"]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u('[^"]')}}}if(ar!==null){if(f.charCodeAt(M)===34){aq='"';M++}else{aq=null;if(Z===0){u('"\\""')}}if(aq!==null){au=[au,ar,aq]}else{au=null;M=at}}else{au=null;M=at}}else{au=null;M=at}if(au!==null){au=(function(ax,aw){return{type:"string",args:[aw.join("")]}})(av,au[1])}if(au===null){M=av}if(au===null){av=M;at=M;if(f.charCodeAt(M)===39){au="'";M++}else{au=null;if(Z===0){u('"\'"')}}if(au!==null){ar=[];if(/^[^']/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[^']")}}while(aq!==null){ar.push(aq);if(/^[^']/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[^']")}}}if(ar!==null){if(f.charCodeAt(M)===39){aq="'";M++}else{aq=null;if(Z===0){u('"\'"')}}if(aq!==null){au=[au,ar,aq]}else{au=null;M=at}}else{au=null;M=at}}else{au=null;M=at}if(au!==null){au=(function(ax,aw){return{type:"string",args:[aw.join("")]}})(av,au[1])}if(au===null){M=av}}return au}function am(){var av,at,aq;var aw,au,ar;aw=M;au=M;av=ah();if(av!==null){ar=M;if(f.charCodeAt(M)===46){at=".";M++}else{at=null;if(Z===0){u('"."')}}if(at!==null){aq=ah();aq=aq!==null?aq:"";if(aq!==null){at=[at,aq]}else{at=null;M=ar}}else{at=null;M=ar}at=at!==null?at:"";if(at!==null){av=[av,at]}else{av=null;M=au}}else{av=null;M=au}if(av!==null){av=(function(az,ay,ax){return{type:"number",args:[(ax)?parseFloat(ay+"."+ax[1]):parseInt(ay)]}})(aw,av[0],av[1])}if(av===null){M=aw}if(av===null){aw=M;au=M;if(f.charCodeAt(M)===46){av=".";M++}else{av=null;if(Z===0){u('"."')}}if(av!==null){at=ah();if(at!==null){av=[av,at]}else{av=null;M=au}}else{av=null;M=au}if(av!==null){av=(function(ay,ax){return{type:"number",args:[parseFloat("."+ax)]}})(aw,av[1])}if(av===null){M=aw}}return av}function ah(){var ar,aq;var at;at=M;if(/^[0-9]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[0-9]")}}if(aq!==null){ar=[];while(aq!==null){ar.push(aq);if(/^[0-9]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[0-9]")}}}}else{ar=null}if(ar!==null){ar=(function(av,au){return au.join("")})(at,ar)}if(ar===null){M=at}return ar}function ae(){var aq;if(f.charCodeAt(M)===42){aq="*";M++}else{aq=null;if(Z===0){u('"*"')}}return aq}function m(){var at,aq;var au,ar;au=M;ar=M;at=ab();if(at!==null){aq=(function(ax,av){var aw;if(V.args[0]===null){for(aw=0;aw<aa.length;aw++){if(V.args[1]==aa[aw]){return false}}}return true})(M,at)?"":null;if(aq!==null){at=[at,aq]}else{at=null;M=ar}}else{at=null;M=ar}if(at!==null){at=(function(aw,av){(av.args[0]==="")?av={type:av.type,args:[null,av.args[1]]}:X(av.args[0]);return av})(au,at[0])}if(at===null){M=au}return at}function O(){var at,aq;var au,ar;au=M;ar=M;if(f.charCodeAt(M)===36){at="$";M++}else{at=null;if(Z===0){u('"$"')}}if(at!==null){aq=ab();if(aq!==null){at=[at,aq]}else{at=null;M=ar}}else{at=null;M=ar}if(at!==null){at=(function(aw,av){X(av.args[0]);return{type:"$",args:[av]}})(au,at[1])}if(at===null){M=au}return at}function T(){var au,ar,aq;var av,at;av=M;if(f.charCodeAt(M)===42){au="*";M++}else{au=null;if(Z===0){u('"*"')}}if(au!==null){au=(function(aw){return{type:"name",args:[null,null]}})(av)}if(au===null){M=av}if(au===null){av=M;at=M;au=I();if(au!==null){if(f.charCodeAt(M)===58){ar=":";M++}else{ar=null;if(Z===0){u('":"')}}if(ar!==null){if(f.charCodeAt(M)===42){aq="*";M++}else{aq=null;if(Z===0){u('"*"')}}if(aq!==null){au=[au,ar,aq]}else{au=null;M=at}}else{au=null;M=at}}else{au=null;M=at}if(au!==null){au=(function(ax,aw){X(aw);return{type:"name",args:[aw,null]}})(av,au[0])}if(au===null){M=av}if(au===null){av=M;au=ab();if(au!==null){au=(function(ax,aw){X(aw.args[0]);return aw})(av,au)}if(au===null){M=av}}}return au}function ao(){var aq;if(f.substr(M,7)==="comment"){aq="comment";M+=7}else{aq=null;if(Z===0){u('"comment"')}}if(aq===null){if(f.substr(M,4)==="text"){aq="text";M+=4}else{aq=null;if(Z===0){u('"text"')}}if(aq===null){if(f.substr(M,22)==="processing-instruction"){aq="processing-instruction";M+=22}else{aq=null;if(Z===0){u('"processing-instruction"')}}if(aq===null){if(f.substr(M,4)==="node"){aq="node";M+=4}else{aq=null;if(Z===0){u('"node"')}}}}}return aq}function U(){var ar,aq;if(/^[ \t\r\n]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[ \\t\\r\\n]")}}if(aq!==null){ar=[];while(aq!==null){ar.push(aq);if(/^[ \t\r\n]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[ \\t\\r\\n]")}}}}else{ar=null}return ar}function P(){var aq;aq=U();aq=aq!==null?aq:"";return aq}function ab(){var aq;var ar;ar=M;aq=z();if(aq===null){aq=v()}if(aq!==null){aq=(function(au,at){V=at;return at})(ar,aq)}if(aq===null){M=ar}return aq}function z(){var au,ar,aq;var av,at;av=M;at=M;au=I();if(au!==null){if(f.charCodeAt(M)===58){ar=":";M++}else{ar=null;if(Z===0){u('":"')}}if(ar!==null){aq=I();if(aq!==null){au=[au,ar,aq]}else{au=null;M=at}}else{au=null;M=at}}else{au=null;M=at}if(au!==null){au=(function(ay,ax,aw){return{type:"name",args:[ax,aw]}})(av,au[0],au[2])}if(au===null){M=av}return au}function v(){var aq;var ar;ar=M;aq=I();if(aq!==null){aq=(function(au,at){return{type:"name",args:[null,at]}})(ar,aq)}if(aq===null){M=ar}return aq}function I(){var aq;aq=g();return aq}function C(){var aq;if(/^[A-Z]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[A-Z]")}}if(aq===null){if(f.charCodeAt(M)===95){aq="_";M++}else{aq=null;if(Z===0){u('"_"')}}if(aq===null){if(/^[a-z]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[a-z]")}}if(aq===null){if(/^[\xC0-\xD6]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\xC0-\\xD6]")}}if(aq===null){if(/^[\xD8-\xF6]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\xD8-\\xF6]")}}if(aq===null){if(/^[\xF8-\u02FF]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\xF8-\\u02FF]")}}if(aq===null){if(/^[\u0370-\u037D]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\u0370-\\u037D]")}}if(aq===null){if(/^[\u037F-\u1FFF]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\u037F-\\u1FFF]")}}if(aq===null){if(/^[\u200C-\u200D]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\u200C-\\u200D]")}}if(aq===null){if(/^[\u2070-\u218F]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\u2070-\\u218F]")}}if(aq===null){if(/^[\u2C00-\u2FEF]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\u2C00-\\u2FEF]")}}if(aq===null){if(/^[\u3001-\uD7FF]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\u3001-\\uD7FF]")}}if(aq===null){if(/^[\uF900-\uFDCF]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\uF900-\\uFDCF]")}}if(aq===null){if(/^[\uFDF0-\uFFFD]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\uFDF0-\\uFFFD]")}}}}}}}}}}}}}}}return aq}function t(){var aq;aq=C();if(aq===null){if(f.charCodeAt(M)===45){aq="-";M++}else{aq=null;if(Z===0){u('"-"')}}if(aq===null){if(f.charCodeAt(M)===46){aq=".";M++}else{aq=null;if(Z===0){u('"."')}}if(aq===null){if(/^[0-9]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[0-9]")}}if(aq===null){if(/^[\xB7]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\xB7]")}}if(aq===null){if(/^[\u0300-\u036F]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\u0300-\\u036F]")}}if(aq===null){if(/^[\u203F-\u2040]/.test(f.charAt(M))){aq=f.charAt(M);M++}else{aq=null;if(Z===0){u("[\\u203F-\\u2040]")}}}}}}}}return aq}function g(){var au,ar,aq;var av,at;av=M;at=M;au=C();if(au!==null){ar=[];aq=t();while(aq!==null){ar.push(aq);aq=t()}if(ar!==null){au=[au,ar]}else{au=null;M=at}}else{au=null;M=at}if(au!==null){au=(function(ay,aw,ax){return aw+ax.join("")})(av,au[0],au[1])}if(au===null){M=av}return au}function G(at){at.sort();var au=null;var ar=[];for(var aq=0;aq<at.length;aq++){if(at[aq]!==au){ar.push(at[aq]);au=at[aq]}}return ar}function H(){var aq=1;var au=1;var av=false;for(var ar=0;ar<Math.max(M,h);ar++){var at=f.charAt(ar);if(at==="\n"){if(!av){aq++}au=1;av=false}else{if(at==="\r"||at==="\u2028"||at==="\u2029"){aq++;au=1;av=true}else{au++;av=false}}}return{line:aq,column:au}}var al=function(ax,av,ar,aw){var au,at,aq={type:"",args:[]};aq.args.push(ax);for(au=0;au<av.length;au++){switch(typeof ar){case"string":aq.type=ar;break;case"object":aq.type=av[au][ar[0]];for(at=1;at<ar.length;at++){aq.type=aq.type[ar[at]]}break;default:aq.type=av[au][ar];break}aq.args.push((typeof aw=="undefined")?av[au]:av[au][aw]);aq={type:"",args:[aq]}}return aq.args[0]},j=function(au,at,aq,av){var ar=[];if(aq.length<1){return au}for(i=0;i<aq.length;i++){ar.push(aq[i][av])}return{type:"predicate",args:[at,au,ar]}},N=[],X=function(ar){var aq,at=false;if(ar===null){return}for(aq=0;aq<N.length;aq++){if(N[aq]===ar){at=true;break}}if(!at){N.push(ar)}},V,aa=["comment","text","processing-instruction","node"],an=function(ar,at,aq){if(ar=="/"){return{type:"/",args:[at,aq]}}return{type:"/",args:[{type:"/",args:[at,{type:"step",args:["descendant-or-self",{type:"nodeType",args:["node",[]]}]}]},aq]}};var y=e[q]();if(y===null||M!==f.length){var Q=Math.max(M,h);var l=Q<f.length?f.charAt(Q):null;var Y=H();throw new this.SyntaxError(G(s),l,Q,Y.line,Y.column)}return y},toSource:function(){return this._source}};a.SyntaxError=function(f,g,h,d,e){function c(l,m){var j,k;switch(l.length){case 0:j="end of input";break;case 1:j=l[0];break;default:j=l.slice(0,l.length-1).join(", ")+" or "+l[l.length-1]}k=m?b(m):"end of input";return"Expected "+j+" but "+k+" found."}this.name="SyntaxError";this.expected=f;this.found=g;this.message=c(f,g);this.offset=h;this.line=d;this.column=e};a.SyntaxError.prototype=Error.prototype;return a})();
